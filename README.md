# Flappy Action Game

## 1. ゲーム概要
迫りくる障害物をジャンプで避けてハイスコアを目指す、シンプルな横スクロールアクションゲームです。2つの異なるステージを選択して遊ぶことができます。

* **Square Walls（四角形ステージ）**: 固定された壁の間をすり抜ける精密な操作が求められるモード。
* **Moving Spikes（三角形ステージ）**: 上下に動く壁を避けながら壁の間をすり抜ける、動的な予測が必要なモード。

## 2. 操作方法（マニュアル）
ゲームの起動後、以下のキーを使用してプレイします。

### ステージ選択（メニュー画面）
* `1`: Square Walls（四角形ステージ）を開始
* `2`: Moving Spikes（三角形ステージ）を開始

### ゲームプレイ中
* `SPACE` キー または `↑` キー: ジャンプ（上昇）
* ※何もしないと重力に従って落下します。

### ゲームオーバー時
* `SPACE` キー: メニュー画面（選択画面）に戻る

## 3. 工夫した点
* **難易度の緩急と絶対的な通過保証**: 
    このゲームの難易度を上げようとして壁の隙間を狭くしてたのですが、それが原因で壁の隙間を通ることができなくなりました。このことから、隙間を通れるギリギリに設定しつつ、調整しながら操作をしないといけないような難易度にしました。また、ギリギリの隙間だけに設定をしていると全く進むことができなかったので隙間を大きく空けて簡単に通れるようにも設定しました。
* **数学的なアニメーション**: 
    三角形ステージでは `math.sin` 関数を利用し、トゲが上下に動くアニメーションを入れました。
* **シビアな当たり判定**: 
    `pygame.mask` を使用し、四角形や三角形の見た目通りの形（ピクセル単位）で正確に当たり判定が行われるようにしています。

## 4. 苦労した点
* **浮動小数点数と整数の型エラー**: 
    重力計算において、小数の値を Pygame の `Rect.y`にint型で直接代入しようとした時に発生するエラーの解決に苦労しました。 この部分に自分で気づくことができずに生成AIの力を借りて解決することができました。
* **スプライトグループの型互換性**: 
    Pygame の標準的な `Sprite` クラスの継承ルール（`*groups` の扱い）と、独自のクラス設計を一致させるための型チェックエラーへの対応が難所でした。
* **三角形の敷き詰めと間隔の両立**: 
    初めは連続した隙間を通るように設定をしたかったのですが、ランダム関数を使い壁を生成していたので高さがバラバラになってしまい予定していたことができなくなりした。隙間を通れるようにだけでなく高低の部分で間に合うように余裕を持たせるように、生成スパン（`spawn_rate`）とトゲの幅（`width`）のバランスを何度も調整しました。
* **デバッグ**
    私はこのようなゲームが苦手なので壁が本当に通れるかや壁の感覚に余裕があるかの確認が簡単にすることができず、何度もgameoverになりました。